(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-05bd2470"],{"38c9":function(t,e,i){"use strict";i("65ed")},"54eb":function(t,e,i){"use strict";i.r(e);var a,n=i("5530"),l=(i("159b"),i("ade3")),o=i("90fe"),s={data:function(){return{modal:{visible:!1,width:600,clickBackdropToClose:!1,bodyStyle:{padding:"24px"},type:1,submitting:!1,callback:void 0},model:{id:void 0,name:"",description:"",count:0,state:1,datetime:""},controls:{name:{clearable:!0},description:{clearable:!0,maxLength:200},count:{min:0,formatter:function(t){return t+" 万"}},datetime:{clearable:!0}},rules:{name:[{trigger:"blur",type:"string",required:!0,message:"请输入规则名称"}],description:[{trigger:"blur",type:"string",required:!0,message:"请输入描述"}],count:[{trigger:"change",type:"number",required:!0,message:"请输入服务调用次数"}],state:[{trigger:"change",type:"number",required:!0,message:"请选择状态"}],datetime:[{trigger:"blur",type:"string",required:!0,message:"请输入上次调度时间"}]}}},methods:(a={add:function(t){this.modal.type=1,this.modal.visible=!0,this.modal.callback=t},edit:function(t,e){var i=this;this.modal.type=2,this.modal.visible=!0,this.modal.callback=e,this.$nextTick((function(){i.model=o.a.clone(t)}))},handleClose:function(){this.visible=!1,this.submitting=!1},handleAfterClose:function(){this.$refs.form.reset()}},Object(l.a)(a,"handleClose",(function(){this.modal.visible=!1,this.modal.submitting=!1})),Object(l.a)(a,"handleCancel",(function(){this.handleClose()})),Object(l.a)(a,"handleSubmit",(function(){var t=this;this.$refs.form.validate((function(e){if(!e)return t.$message.error("信息填写不正确");var i=t.model,a="",n="";1==t.modal.type?(a="list/addTableItem",n="提交成功"):2==t.modal.type&&(a="list/editTableItem",n="保存成功"),t.modal.submitting=!0,t.$store.dispatch(a,i).then((function(e){t.handleClose(),t.$message.success(n),"function"==typeof t.modal.callback&&t.modal.callback(e)})).catch((function(e){t.modal.submitting=!1}))}))})),a)},r=i("2877"),c={components:{VuiEditor:Object(r.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vui-modal",{attrs:{width:t.modal.width,clickBackdropToClose:t.modal.clickBackdropToClose,bodyStyle:t.modal.bodyStyle},on:{cancel:t.handleClose,afterClose:t.handleAfterClose},model:{value:t.modal.visible,callback:function(e){t.$set(t.modal,"visible",e)},expression:"modal.visible"}},[i("template",{slot:"title"},[1===t.modal.type?[t._v("添加规则")]:[t._v("编辑规则")]],2),i("vui-form",{ref:"form",attrs:{layout:"horizontal",model:t.model,rules:t.rules,labelWidth:112}},[i("vui-form-item",{attrs:{prop:"name",label:"规则名称"}},[i("vui-input",t._b({staticStyle:{width:"50%"},attrs:{placeholder:"请输入规则名称"},model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}},"vui-input",t.controls.name,!1))],1),i("vui-form-item",{attrs:{prop:"description",label:"描述"}},[i("vui-textarea",t._b({attrs:{placeholder:"请输入描述"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}},"vui-textarea",t.controls.description,!1))],1),i("vui-form-item",{attrs:{prop:"count",label:"服务调用次数"}},[i("vui-input-number",t._b({staticStyle:{width:"25%"},attrs:{placeholder:"请输入服务调用次数"},model:{value:t.model.count,callback:function(e){t.$set(t.model,"count",e)},expression:"model.count"}},"vui-input-number",t.controls.count,!1))],1),i("vui-form-item",{attrs:{prop:"state",label:"状态"}},[i("vui-radio-group",{model:{value:t.model.state,callback:function(e){t.$set(t.model,"state",e)},expression:"model.state"}},[i("vui-radio",{attrs:{value:1}},[t._v("未启用")]),i("vui-radio",{attrs:{value:2}},[t._v("已上线")]),i("vui-radio",{attrs:{value:3}},[t._v("运行中")]),i("vui-radio",{attrs:{value:4}},[t._v("关闭")])],1)],1),i("vui-form-item",{attrs:{prop:"datetime",label:"上次调度时间"}},[i("vui-input",t._b({staticStyle:{width:"50%"},attrs:{placeholder:"请输入上次调度时间"},model:{value:t.model.datetime,callback:function(e){t.$set(t.model,"datetime",e)},expression:"model.datetime"}},"vui-input",t.controls.datetime,!1))],1)],1),i("template",{slot:"footer"},[i("vui-button",{attrs:{disabled:t.modal.submitting},on:{click:t.handleCancel}},[t._v("取消")]),i("vui-button",{attrs:{type:"primary",loading:t.modal.submitting},on:{click:t.handleSubmit}},[1===t.modal.type?[t._v("确认")]:[t._v("保存")]],2)],1)],2)}),[],!1,null,null,null).exports},data:function(){return{page:{fullscreen:!1},searcher:{name:"",description:""},pagination:{total:0,page:1,pageSize:20},list:{loading:!1,bordered:!0,rowKey:"id",rowSelection:{width:60,multiple:!0,value:[]},columns:[{key:"name",dataIndex:"name",title:"规则名称"},{key:"description",dataIndex:"description",title:"描述"},{key:"count",dataIndex:"count",sorter:!0,slot:"count",title:"服务调用次数"},{key:"state",dataIndex:"state",slot:"state",title:"状态"},{key:"datetime",dataIndex:"datetime",sorter:!0,title:"上次调度时间"},{key:"action",width:116,slot:"action",title:"操作"}],data:[]}}},computed:{selection:function(){var t=this,e=this.list.rowSelection.value.length,i=0;return this.list.data.forEach((function(e){-1!==t.list.rowSelection.value.indexOf(e.id)&&(i+=e.count)})),{count:e,times:i}}},methods:{getPageList:function(){var t=this,e=Object(n.a)(Object(n.a)({},this.searcher),{},{page:this.pagination.page,pageSize:this.pagination.pageSize});this.list.loading=!0,this.$store.dispatch("list/getTablePageList",e).then((function(e){t.list.loading=!1,t.list.data=e.data.content,t.pagination.total=e.data.total})).catch((function(e){t.list.loading=!1}))},handleResetSearch:function(){this.$refs.searcher.reset(),this.getPageList()},handleSearch:function(){this.pagination.page=1,this.getPageList()},handleChangePage:function(t){this.pagination.page=t,this.getPageList()},handleChangePageSize:function(t){this.pagination.pageSize=t,this.getPageList()},handleRowSelect:function(t){this.list.rowSelection.value=t},handleFullscreen:function(){this.page.fullscreen=!this.page.fullscreen},handleRefresh:function(){this.getPageList()},handleExport:function(){this.$refs.table.export({original:!1,filename:"表格名称"})},handleBatchOperate:function(t){var e=this;"approve"===t?this.$message.info("您点击了批量审批"):"delete"===t&&this.$modal.confirm({title:"友情提示",description:"您确定要批量删除所选记录吗？",canecl:function(){return e.$message.info("您点击了取消")},okButtonProps:{props:{type:"danger"}},ok:function(){return e.$message.info("您点击了确定")}})},handleAdd:function(){var t=this;this.$refs.editor.add((function(e){t.getPageList()}))},handleEdit:function(t){var e=this;this.$refs.editor.edit(t,(function(t){e.getPageList()}))},handleDelete:function(t){var e=this,i=t,a=this.$message.loading({duration:0,content:"正在删除，请稍后..."});this.$store.dispatch("list/deleteTableItem",i).then((function(t){a.close(),e.$message.success("删除成功"),e.getPageList()})).catch((function(t){e.list.loading=!1}))}},created:function(){this.getPageList()}},d=(i("38c9"),Object(r.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vui-design-pro-page"},[i("vui-page-header",{staticClass:"vui-design-pro-page-header",attrs:{ghost:!1}},[i("template",{slot:"title"},[t._v("查询表格")]),i("p",[t._v("表格查询的复杂示例，包含增删改查、批量操作、导出、全屏和刷新等功能")])],2),i("vui-fullscreen",{staticClass:"vui-design-pro-page-body",model:{value:t.page.fullscreen,callback:function(e){t.$set(t.page,"fullscreen",e)},expression:"page.fullscreen"}},[i("vui-card",{attrs:{bordered:!1}},[i("vui-form",{ref:"searcher",attrs:{layout:"inline",model:t.searcher}},[i("vui-form-item",{attrs:{prop:"name"}},[i("vui-input",{attrs:{clearable:"",placeholder:"按规则名称查询"},model:{value:t.searcher.name,callback:function(e){t.$set(t.searcher,"name",e)},expression:"searcher.name"}})],1),i("vui-form-item",{attrs:{prop:"description"}},[i("vui-input",{attrs:{clearable:"",placeholder:"按描述查询"},model:{value:t.searcher.description,callback:function(e){t.$set(t.searcher,"description",e)},expression:"searcher.description"}})],1),i("vui-form-item",[i("vui-space",[i("vui-button",{on:{click:t.handleResetSearch}},[t._v("重置")]),i("vui-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查询")])],1)],1)],1)],1),i("vui-card",{staticStyle:{"margin-top":"16px"},attrs:{bordered:!1,bodyStyle:"padding: 0; overflow: hidden;"}},[i("template",{slot:"title"},[t._v("查询表格")]),i("vui-space",{attrs:{slot:"extra",divider:"",size:16},slot:"extra"},[i("vui-space",[i("vui-tooltip",{staticStyle:{display:"block"},attrs:{content:t.page.fullscreen?"退出全屏":"全屏"}},[i("vui-link",{attrs:{size:"large",block:""},on:{click:t.handleFullscreen}},[i("vui-icon",{attrs:{type:t.page.fullscreen?"fullscreen-exit":"fullscreen"}})],1)],1),i("vui-tooltip",{staticStyle:{display:"block"},attrs:{content:"刷新"}},[i("vui-link",{attrs:{size:"large",block:""},on:{click:t.handleRefresh}},[i("vui-icon",{attrs:{type:"refresh"}})],1)],1)],1),i("vui-space",[i("vui-button",{attrs:{icon:"download"},on:{click:t.handleExport}},[t._v("导出")]),i("vui-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleAdd}},[t._v("添加")]),t.selection.count>0?i("vui-dropdown",[i("vui-button",{attrs:{type:"primary",icon:"list-settings"}},[t._v("批量操作")]),i("vui-dropdown-menu",{attrs:{slot:"menu"},on:{click:t.handleBatchOperate},slot:"menu"},[i("vui-dropdown-menu-item",{attrs:{value:"approve",title:"批量审批"}}),i("vui-dropdown-menu-item",{attrs:{value:"delete",danger:"",title:"批量删除"}})],1)],1):t._e()],1)],1),i("vui-alert",{staticStyle:{"border-bottom":"1px solid #f0f0f0"},attrs:{type:"warning",showIcon:"",banner:""}},[[t._v("已选择 "),i("em",{staticStyle:{color:"#faad14","font-weight":"600"}},[t._v(t._s(t.selection.count))]),t._v(" 项，服务调用次数总计 "),i("em",[t._v(t._s(t.selection.times))]),t._v(" 万")]],2),i("vui-table",t._b({ref:"table",staticStyle:{"max-width":"unset",margin:"-1px"},on:{rowSelect:t.handleRowSelect},scopedSlots:t._u([{key:"count",fn:function(e){var i=e.row;return[t._v(t._s(t._f("numerical")(i.count))+" 万")]}},{key:"state",fn:function(e){var a=e.row;return[1===a.state?i("vui-badge",{attrs:{status:"default",text:"未启用"}}):2===a.state?i("vui-badge",{attrs:{status:"success",text:"已上线"}}):3===a.state?i("vui-badge",{attrs:{status:"processing",text:"运行中"}}):4===a.state?i("vui-badge",{attrs:{status:"error",text:"关闭"}}):t._e()]}},{key:"action",fn:function(e){var a=e.row;return[i("vui-space",{attrs:{divider:""}},[i("a",{staticStyle:{display:"block"},attrs:{href:"javascript:;"},on:{click:function(e){return t.handleEdit(a)}}},[t._v("编辑")]),i("vui-popconfirm",{staticStyle:{display:"block"},attrs:{placement:"top-end",title:"确定要删除当前记录嘛？"},on:{ok:function(e){return t.handleDelete(a)}}},[i("a",{staticStyle:{display:"block"},attrs:{href:"javascript:;"}},[t._v("删除")])])],1)]}}])},"vui-table",t.list,!1)),i("div",{staticStyle:{padding:"20px"}},[i("div",{staticStyle:{float:"left","line-height":"34px"}},[t._v("共 "),i("em",[t._v(t._s(t.pagination.total))]),t._v(" 条")]),i("vui-pagination",t._b({attrs:{align:"right",showPageSizer:""},on:{change:t.handleChangePage,changePageSize:t.handleChangePageSize}},"vui-pagination",t.pagination,!1))],1)],2),i("vui-editor",{ref:"editor"})],1)],1)}),[],!1,null,null,null));e.default=d.exports},"65ed":function(t,e,i){}}]);