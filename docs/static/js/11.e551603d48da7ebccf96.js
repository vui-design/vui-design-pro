webpackJsonp([11],{TcDq:function(t,e){},hWAR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),s=a("wxfA"),r={data:function(){return{type:1,visible:!1,submitting:!1,data:{id:void 0,name:"",description:"",count:0,state:1,datetime:""},rules:{name:[{trigger:"blur",required:!0,type:"string",message:"请输入规则名称"}],description:[{trigger:"blur",required:!0,type:"string",message:"请输入描述"}],count:[{trigger:"change",required:!0,type:"number",message:"请输入服务调用次数"}],state:[{trigger:"change",required:!0,type:"number",message:"请选择状态"}],datetime:[{trigger:"blur",required:!0,type:"string",message:"请输入上次调度时间"}]}}},methods:{add:function(t){this.type=1,this.visible=!0,this.callback=t},edit:function(t,e){this.type=2,this.visible=!0,this.data=s.a.clone(t),this.callback=e},formatter:function(t){return t+" 万"},parser:function(t){return t.replace(" 万","")},handleClose:function(){this.visible=!1,this.submitting=!1},handleAfterClose:function(){var t={id:void 0,name:"",description:"",count:0,state:1,datetime:""};this.$refs.form.reset(),this.data=t},handleSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return t.$message.error("信息填写不正确");var a=t.data,i="",n="";1==t.type?(i="example/addListTableDatasource",n="提交成功"):2==t.type&&(i="example/editListTableDatasource",n="保存成功"),t.submitting=!0,t.$store.dispatch(i,a).then(function(e){t.handleClose(),t.$message.success(n),"function"==typeof t.callback&&t.callback(e)}).catch(function(e){t.submitting=!1})})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vui-modal",{attrs:{closable:!t.submitting,width:680,clickBackdropToClose:!1},on:{cancel:function(e){return t.handleClose()},afterClose:function(e){return t.handleAfterClose()}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("template",{slot:"title"},[t._v(t._s(1==t.type?"新增规则":"编辑规则"))]),a("vui-form",{ref:"form",attrs:{layout:"horizontal",model:t.data,rules:t.rules,labelWidth:112}},[a("vui-form-item",{attrs:{prop:"name",label:"规则名称"}},[a("vui-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入规则名称"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1),a("vui-form-item",{attrs:{prop:"description",label:"描述"}},[a("vui-textarea",{staticStyle:{width:"100%"},attrs:{maxLength:"200",placeholder:"请输入描述"},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}})],1),a("vui-form-item",{attrs:{prop:"count",label:"服务调用次数"}},[a("vui-input-number",{staticStyle:{width:"25%"},attrs:{min:0,formatter:t.formatter,parser:t.parser,placeholder:"请输入服务调用次数"},model:{value:t.data.count,callback:function(e){t.$set(t.data,"count",e)},expression:"data.count"}})],1),a("vui-form-item",{attrs:{prop:"state",label:"状态"}},[a("vui-radio-group",{model:{value:t.data.state,callback:function(e){t.$set(t.data,"state",e)},expression:"data.state"}},[a("vui-radio",{attrs:{value:1}},[t._v("未启用")]),a("vui-radio",{attrs:{value:2}},[t._v("已上线")]),a("vui-radio",{attrs:{value:3}},[t._v("运行中")]),a("vui-radio",{attrs:{value:4}},[t._v("关闭")])],1)],1),a("vui-form-item",{attrs:{prop:"datetime",label:"上次调度时间"}},[a("vui-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入上次调度时间"},model:{value:t.data.datetime,callback:function(e){t.$set(t.data,"datetime",e)},expression:"data.datetime"}})],1)],1),a("template",{slot:"footer"},[a("vui-button",{attrs:{disabled:t.submitting},on:{click:function(e){return t.handleClose()}}},[t._v("取消")]),a("vui-button",{attrs:{type:"primary",loading:t.submitting},on:{click:function(e){return t.handleSubmit()}}},[t._v(t._s(1==t.type?"确认":"保存"))])],1)],2)},staticRenderFns:[]},l={components:{VuiProFormModal:a("VU/8")(r,o,!1,null,null,null).exports},data:function(){return{page:{fullscreen:!1},searcher:{name:"",description:""},pagination:{total:0,page:1,pageSize:20},list:{loading:!1,columns:[{key:"name",dataIndex:"name",title:"规则名称"},{key:"description",dataIndex:"description",title:"描述"},{key:"count",dataIndex:"count",sorter:!0,slot:"count",title:"服务调用次数"},{key:"state",dataIndex:"state",slot:"state",title:"状态"},{key:"datetime",dataIndex:"datetime",sorter:!0,title:"上次调度时间"},{key:"action",width:120,slot:"action",title:"操作"}],rowSelection:{width:60,multiple:!0,value:[]},data:[]}}},computed:{selectedTotalItems:function(){return this.list.rowSelection.value.length},selectedTotalTimes:function(){var t=this.list.rowSelection.value,e=0;return this.list.data.forEach(function(a){-1!==t.indexOf(a.id)&&(e+=a.count)}),e}},methods:{getList:function(){var t=this,e=n()({},this.searcher,{page:this.pagination.page,pageSize:this.pagination.pageSize});this.list.loading=!0,this.$store.dispatch("example/getListTableDatasource",e).then(function(e){t.list.loading=!1,t.list.data=e.content,t.pagination.total=e.total}).catch(function(e){t.list.loading=!1})},handleResetSearch:function(){this.$refs.searcher.reset(),this.getList()},handleSearch:function(){this.pagination.page=1,this.getList()},handleChangePage:function(t){this.pagination.page=t,this.getList()},handleChangePageSize:function(t){this.pagination.pageSize=t,this.getList()},handleRowSelect:function(t){this.list.rowSelection.value=t},handleFullscreen:function(){this.page.fullscreen=!this.page.fullscreen},handleRefresh:function(){this.getList()},handleExport:function(){this.$refs.table.export({original:!1,filename:"表格名称"})},handleBatchOperate:function(t){var e=this;"delete"===t?this.$modal.confirm({title:"友情提示",description:"您确定要批量删除所选记录吗？",onCancel:function(){e.$message.info("您点击了取消")},onOk:function(){e.$message.info("您点击了确定")}}):this.$message.info("您点击了批量审批")},handleAdd:function(){var t=this;this.$refs.formModal.add(function(e){t.getList()})},handleEdit:function(t){var e=this;this.$refs.formModal.edit(t,function(t){e.getList()})},handleDelete:function(t){var e=this,a=t,i=this.$message.loading({duration:0,content:"正在删除，请稍后..."});this.$store.dispatch("example/deleteListTableDatasource",a).then(function(t){i.close(),e.$message.success("删除成功"),e.getList()}).catch(function(t){e.list.loading=!1})}},created:function(){this.getList()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vui-pro-page"},[a("vui-page-header",{staticClass:"vui-pro-page-header",attrs:{ghost:!1}},[a("template",{slot:"title"},[t._v("查询表格")]),a("p",[t._v("表格查询的复杂示例，包含增删改查、批量操作、导出、全屏和刷新等功能")])],2),a("vui-fullscreen",{staticClass:"vui-pro-page-body",model:{value:t.page.fullscreen,callback:function(e){t.$set(t.page,"fullscreen",e)},expression:"page.fullscreen"}},[a("vui-card",{attrs:{bordered:!1,shadow:"always"}},[a("vui-form",{ref:"searcher",attrs:{model:t.searcher,layout:"inline"}},[a("vui-form-item",{attrs:{prop:"name"}},[a("vui-input",{attrs:{placeholder:"请输入规则名称"},model:{value:t.searcher.name,callback:function(e){t.$set(t.searcher,"name",e)},expression:"searcher.name"}})],1),a("vui-form-item",{attrs:{prop:"description"}},[a("vui-input",{attrs:{placeholder:"请输入描述"},model:{value:t.searcher.description,callback:function(e){t.$set(t.searcher,"description",e)},expression:"searcher.description"}})],1),a("vui-form-item",[a("vui-space",[a("vui-button",{on:{click:t.handleResetSearch}},[t._v("重置")]),a("vui-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查询")])],1)],1)],1)],1),a("vui-card",{staticClass:"margin-top-20",attrs:{bordered:!1,shadow:"always",headerStyle:"padding: 16px 16px 16px 20px;",bodyStyle:"padding: 0;",title:"查询表格"}},[a("vui-space",{attrs:{slot:"extra",divider:"",size:16},slot:"extra"},[a("vui-space",[a("vui-tooltip",{attrs:{content:t.page.fullscreen?"退出全屏":"全屏"}},[a("a",{staticClass:"link-default",staticStyle:{"font-size":"16px"},attrs:{href:"javascript:;"},on:{click:t.handleFullscreen}},[a("vui-icon",{attrs:{type:t.page.fullscreen?"fullscreen-exit":"fullscreen"}})],1)]),a("vui-tooltip",{attrs:{content:"刷新"}},[a("a",{staticClass:"link-default",staticStyle:{"font-size":"16px"},attrs:{href:"javascript:;"},on:{click:t.handleRefresh}},[a("vui-icon",{attrs:{type:"refresh"}})],1)])],1),a("vui-space",[a("vui-button",{attrs:{icon:"download"},on:{click:t.handleExport}},[t._v("导出")]),a("vui-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleAdd}},[t._v("新增")]),t.selectedTotalItems>0?a("vui-dropdown",[a("vui-button",{attrs:{type:"primary",icon:"list-settings"}},[t._v("批量操作")]),a("vui-dropdown-menu",{attrs:{slot:"menu"},on:{click:t.handleBatchOperate},slot:"menu"},[a("vui-dropdown-menu-item",{attrs:{name:"delete",title:"批量删除"}}),a("vui-dropdown-menu-item",{attrs:{name:"approve",title:"批量审批"}})],1)],1):t._e()],1)],1),a("vui-alert",{staticStyle:{"border-bottom":"1px solid #f0f0f0"},attrs:{type:"warning",banner:"",showIcon:""}},[[t._v("已选择 "),a("em",{staticStyle:{color:"#faad14","font-weight":"600"}},[t._v(t._s(t.selectedTotalItems))]),t._v(" 项，服务调用次数总计 "),a("em",[t._v(t._s(t.selectedTotalTimes))]),t._v(" 万")]],2),a("vui-table",t._b({ref:"table",attrs:{rowKey:"id"},on:{rowSelect:t.handleRowSelect},scopedSlots:t._u([{key:"count",fn:function(e){var a=e.row;return e.rowIndex,[t._v(t._s(t._f("numerical")(a.count))+" 万")]}},{key:"state",fn:function(e){var i=e.row;return e.rowIndex,[1==i.state?a("vui-badge",{attrs:{status:"default",text:"未启用"}}):2==i.state?a("vui-badge",{attrs:{status:"success",text:"已上线"}}):3==i.state?a("vui-badge",{attrs:{status:"processing",text:"运行中"}}):4==i.state?a("vui-badge",{attrs:{status:"error",text:"关闭"}}):t._e()]}},{key:"action",fn:function(e){var i=e.row;return e.rowIndex,[a("vui-space",{attrs:{divider:""}},[a("a",{staticStyle:{display:"block"},attrs:{href:"javascript:;"},on:{click:function(e){return t.handleEdit(i)}}},[t._v("编辑")]),a("vui-popconfirm",{staticStyle:{display:"block"},attrs:{placement:"top-end",title:"确定要删除当前记录嘛？"},on:{ok:function(e){return t.handleDelete(i)}}},[a("a",{staticStyle:{display:"block"},attrs:{href:"javascript:;"}},[t._v("删除")])])],1)]}}])},"vui-table",t.list,!1)),a("div",{staticClass:"padding-20"},[a("div",{staticStyle:{float:"left","line-height":"34px"}},[t._v("共 "),a("em",[t._v(t._s(t.pagination.total))]),t._v(" 条")]),a("vui-pagination",t._b({attrs:{align:"right",showPageSizer:""},on:{change:t.handleChangePage,changePageSize:t.handleChangePageSize}},"vui-pagination",t.pagination,!1))],1)],1),a("vui-pro-form-modal",{ref:"formModal"})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("TcDq")},null,null);e.default=u.exports}});
//# sourceMappingURL=11.e551603d48da7ebccf96.js.map