webpackJsonp([13],{"76h4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),r=a("wxfA"),n={data:function(){return{type:1,visible:!1,submitting:!1,data:{id:void 0,title:"",startAt:"",owner:void 0,description:""},rules:{title:[{trigger:"blur",required:!0,type:"string",message:"请输入任务名称"}],startAt:[{trigger:"blur",required:!0,type:"string",message:"请输入开始时间"}],owner:[{trigger:"change",required:!0,type:"string",message:"请选择负责人"}],description:[{trigger:"blur",required:!0,type:"string",message:"请输入任务描述"}]}}},methods:{add:function(t){this.type=1,this.visible=!0,this.callback=t},edit:function(t,e){this.type=2,this.visible=!0,this.data=r.a.clone(t),this.callback=e},handleClose:function(){this.visible=!1,this.submitting=!1},handleAfterClose:function(){this.$refs.form.reset()},handleSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return t.$message.error("任务信息填写不正确");var a=t.data,i="",s="";1==t.type?(i="example/addListStandardDatasource",s="提交成功"):2==t.type&&(i="example/editListStandardDatasource",s="保存成功"),t.submitting=!0,t.$store.dispatch(i,a).then(function(e){t.handleClose(),t.$message.success(s),"function"==typeof t.callback&&t.callback(e)}).catch(function(e){t.submitting=!1})})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vui-modal",{attrs:{closable:!t.submitting,width:600,clickBackdropToClose:!1},on:{cancel:function(e){return t.handleClose()},afterClose:function(e){return t.handleAfterClose()}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("template",{slot:"title"},[t._v(t._s(1==t.type?"添加任务":"编辑任务"))]),a("vui-form",{ref:"form",attrs:{layout:"horizontal",model:t.data,rules:t.rules,labelWidth:86}},[a("vui-form-item",{attrs:{prop:"title",label:"任务名称"}},[a("vui-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入任务名称"},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}})],1),a("vui-form-item",{attrs:{prop:"startAt",label:"开始时间"}},[a("vui-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入开始时间"},model:{value:t.data.startAt,callback:function(e){t.$set(t.data,"startAt",e)},expression:"data.startAt"}})],1),a("vui-form-item",{attrs:{prop:"owner",label:"负责人"}},[a("vui-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择负责人"},model:{value:t.data.owner,callback:function(e){t.$set(t.data,"owner",e)},expression:"data.owner"}},[a("vui-option",{attrs:{value:"阿波罗"}},[t._v("阿波罗")]),a("vui-option",{attrs:{value:"柳残阳"}},[t._v("柳残阳")]),a("vui-option",{attrs:{value:"萱子乔"}},[t._v("萱子乔")]),a("vui-option",{attrs:{value:"花满楼"}},[t._v("花满楼")]),a("vui-option",{attrs:{value:"张无忌"}},[t._v("张无忌")]),a("vui-option",{attrs:{value:"紫旭琳"}},[t._v("紫旭琳")]),a("vui-option",{attrs:{value:"张三丰"}},[t._v("张三丰")]),a("vui-option",{attrs:{value:"瑰柳儿"}},[t._v("瑰柳儿")]),a("vui-option",{attrs:{value:"雪浮灵"}},[t._v("雪浮灵")]),a("vui-option",{attrs:{value:"南宫惘"}},[t._v("南宫惘")])],1)],1),a("vui-form-item",{attrs:{prop:"description",label:"任务描述"}},[a("vui-textarea",{staticStyle:{width:"100%"},attrs:{maxLength:"200",placeholder:"请输入任务描述"},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}})],1)],1),a("template",{slot:"footer"},[a("vui-button",{attrs:{disabled:t.submitting},on:{click:function(e){return t.handleClose()}}},[t._v("取消")]),a("vui-button",{attrs:{type:"primary",loading:t.submitting},on:{click:function(e){return t.handleSubmit()}}},[t._v(t._s(1==t.type?"确认":"保存"))])],1)],2)},staticRenderFns:[]},l={components:{VuiProFormModal:a("VU/8")(n,o,!1,null,null,null).exports},data:function(){return{searcher:{status:0,keywords:""},pagination:{total:0,page:1,pageSize:10},list:{loading:!1,data:[]}}},methods:{getList:function(){var t=this,e=s()({},this.searcher,{page:this.pagination.page,pageSize:this.pagination.pageSize});this.list.loading=!0,this.$store.dispatch("example/getListStandardDatasource",e).then(function(e){t.list.loading=!1,t.list.data=e.content,t.pagination.total=e.total}).catch(function(e){t.list.loading=!1})},handleSearch:function(){this.pagination.page=1,this.getList()},handleChangePage:function(t){this.pagination.page=t,this.getList()},handleChangePageSize:function(t){this.pagination.pageSize=t,this.getList()},handleAdd:function(){var t=this;this.$refs.formModal.add(function(e){t.getList()})},handleEdit:function(t){var e=this;this.$refs.formModal.edit(t,function(t){e.getList()})},handleDelete:function(t){var e=this,a=t,i=this.$message.loading({duration:0,content:"正在删除，请稍后..."});this.$store.dispatch("example/deleteListTableDatasource",a).then(function(t){i.close(),e.$message.success("删除成功"),e.getList()}).catch(function(t){e.list.loading=!1})},handleMoreActionClick:function(t,e){var a=this;"edit"===t?this.handleEdit(e):"delete"===t&&this.$modal.confirm({title:"友情提示",description:"您确定要删除当前任务吗？",onOk:function(){a.handleDelete(e)}})}},created:function(){this.getList()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vui-pro-page"},[a("vui-page-header",{staticClass:"vui-pro-page-header",attrs:{ghost:!1}},[a("template",{slot:"title"},[t._v("标准列表")]),a("p",[t._v("标准的列表，包含增删改查等基础操作")])],2),a("div",{staticClass:"vui-pro-page-body"},[a("vui-card",{attrs:{bordered:!1,shadow:"always"}},[a("vui-row",[a("vui-col",{attrs:{span:8}},[a("div",{staticClass:"vui-pro-list-standard-statistic"},[a("h4",[t._v("进行中的任务")]),a("p",[a("em",{staticStyle:{color:"#2d8cf0"}},[t._v("10")]),t._v("个任务")])])]),a("vui-col",{attrs:{span:8}},[a("div",{staticClass:"vui-pro-list-standard-statistic"},[a("h4",[t._v("剩余任务")]),a("p",[a("em",{staticStyle:{color:"#faad14"}},[t._v("4")]),t._v("个任务")])])]),a("vui-col",{attrs:{span:8}},[a("div",{staticClass:"vui-pro-list-standard-statistic"},[a("h4",[t._v("任务总耗时")]),a("p",[a("em",{staticStyle:{color:"#ed5565"}},[t._v("120")]),t._v("个小时")])])])],1)],1),a("vui-card",{staticClass:"margin-top-20",attrs:{bordered:!1,shadow:"always",headerStyle:"padding: 16px 16px 16px 20px;",title:"任务列表"}},[a("vui-space",{attrs:{slot:"extra"},slot:"extra"},[a("vui-radio-group",{attrs:{type:"button"},model:{value:t.searcher.status,callback:function(e){t.$set(t.searcher,"status",e)},expression:"searcher.status"}},[a("vui-radio",{attrs:{value:0}},[t._v("全部")]),a("vui-radio",{attrs:{value:1}},[t._v("进行中")]),a("vui-radio",{attrs:{value:2}},[t._v("已完成")])],1),a("vui-input-group",{attrs:{compact:""}},[a("vui-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入关键字查询"},model:{value:t.searcher.keywords,callback:function(e){t.$set(t.searcher,"keywords",e)},expression:"searcher.keywords"}}),a("vui-button",{attrs:{icon:"search"},on:{click:t.handleSearch}})],1),a("vui-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleAdd}},[t._v("添加")])],1),a("vui-spin",{attrs:{spinning:t.list.loading}},[0==t.list.data.length?a("vui-empty",{staticStyle:{padding:"100px 0"}}):a("vui-list",t._l(t.list.data,function(e,i){return a("vui-list-item",{key:i},[a("vui-list-item-meta",[a("vui-avatar",{attrs:{slot:"avatar",shape:"square",src:e.icon,size:48},slot:"avatar"}),a("a",{attrs:{slot:"title",href:"javascript:;"},slot:"title"},[t._v(t._s(e.title))]),a("div",{staticClass:"write-ellipsis",attrs:{slot:"description"},slot:"description"},[t._v(t._s(e.description))])],1),a("div",{staticClass:"vui-pro-list-standard-item-content"},[a("div",{staticClass:"vui-pro-list-standard-item-content-group"},[a("h4",[t._v("负责人")]),a("p",[t._v(t._s(e.owner))])]),a("div",{staticClass:"vui-pro-list-standard-item-content-group"},[a("h4",[t._v("开始时间")]),a("p",[t._v(t._s(t._f("dateformatter")(e.startAt,"yyyy-MM-dd HH:mm")))])]),a("div",{staticClass:"vui-pro-list-standard-item-content-group"},[a("vui-progress",{attrs:{stroke:6,status:e.status,percentage:e.progress}})],1)]),a("template",{slot:"actions"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.handleEdit(e)}}},[t._v("编辑")]),a("vui-dropdown",{attrs:{trigger:"click",placement:"bottom"}},[a("a",{attrs:{href:"javascript:;"}},[t._v("更多")]),a("vui-dropdown-menu",{attrs:{slot:"menu"},on:{click:function(a){return t.handleMoreActionClick(a,e)}},slot:"menu"},[a("vui-dropdown-menu-item",{attrs:{name:"edit",title:"编辑"}}),a("vui-dropdown-menu-item",{attrs:{name:"delete",title:"删除"}})],1)],1)],1)],2)}),1)],1),a("div",{staticStyle:{"border-top":"1px solid #f0f0f0","padding-top":"20px"}},[a("div",{staticStyle:{float:"left","line-height":"34px"}},[t._v("共 "),a("em",[t._v(t._s(t.pagination.total))]),t._v(" 条")]),a("vui-pagination",t._b({attrs:{align:"right",showPageSizer:"",showPageElevator:""},on:{change:t.handleChangePage,changePageSize:t.handleChangePageSize}},"vui-pagination",t.pagination,!1))],1)],1),a("vui-pro-form-modal",{ref:"formModal"})],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(t){a("KROy")},null,null);e.default=c.exports},KROy:function(t,e){}});
//# sourceMappingURL=13.eb68f4f9e147d7ab59de.js.map